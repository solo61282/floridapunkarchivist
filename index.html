<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Hit Play - Coming Soon</title>

<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet" />

<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    background:#000;
    color:#fff;
    font-family:'Bebas Neue', Arial, sans-serif;
    text-align:center;
    display:flex;
    flex-direction:column;
    min-height:100vh;
  }
  .hero {
    flex:1;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:2rem;
  }
  .text-block {
    text-transform:uppercase;
    font-size:2.5rem;
    letter-spacing:2px;
    line-height:1.1;
  }
  @media (min-width:768px){ .text-block{ font-size:4.5rem; } }
  .videos-section { background:#111; padding:3rem 1rem; }
  .videos-section h2{ font-size:2.3rem; margin-bottom:2rem; }
  .video-grid { display:grid; gap:2rem; }
  .video-item iframe { width:100%; border-radius:10px; border:none; }
  @media(max-width:599px){ .video-grid{grid-template-columns:1fr;} .video-item iframe{height:200px;} }
  @media(min-width:600px) and (max-width:1023px){ .video-grid{grid-template-columns:repeat(2,1fr);} .video-item iframe{height:250px;} }
  @media(min-width:1024px){ .video-grid{grid-template-columns:repeat(3,1fr);} .video-item iframe{height:300px;} }
  .footer{ padding:2rem 1rem; font-size:1.2rem; }
  .footer a{ color:#00aaff; text-decoration:none; }
</style>
</head>
<body>

<div class="hero">
  <div class="text-block">
    <div>NEW</div>
    <div>HIT PLAY WEBSITE</div>
    <div>COMING SOON</div>
  </div>
</div>

<div class="videos-section">
  <h2>VIDEOS</h2>
  <div id="videoGrid" class="video-grid"></div>
</div>

<div class="footer">
  More from the 
  <a href="https://www.youtube.com/channel/UC63N1yWiGhzL2E9hcfFDJoQ" target="_blank">
    Florida Punk Archivist
  </a>
</div>

<script>
const videoGrid = document.getElementById('videoGrid');
const channelId = 'UC63N1yWiGhzL2E9hcfFDJoQ';

async function fetchVideos() {
  try {
    const rssUrl = `https://www.youtube.com/feeds/videos.xml?channel_id=${channelId}`;
    const res = await fetch(rssUrl);
    const text = await res.text();
    const parser = new DOMParser();
    const xml = parser.parseFromString(text, "application/xml");
    const items = xml.querySelectorAll("entry");
    
    if(!items.length) throw new Error('No videos found');

    items.forEach(item => {
      const link = item.querySelector("link").getAttribute("href");
      const videoId = new URL(link).searchParams.get("v");
      const div = document.createElement('div');
      div.className = 'video-item';
      div.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?enablejsapi=1" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
      videoGrid.appendChild(div);
    });

    setupSinglePlay();
  } catch(err){
    console.error(err);
    videoGrid.innerHTML = '<p>Unable to load videos at this time.</p>';
  }
}

let players = [];
function setupSinglePlay() {
  const tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  document.body.appendChild(tag);
}

function onYouTubeIframeAPIReady() {
  const iframes = videoGrid.querySelectorAll('iframe');
  iframes.forEach((iframe, i) => {
    const player = new YT.Player(iframe, {
      events:{
        'onStateChange': e=>{
          if(e.data === YT.PlayerState.PLAYING){
            players.forEach((p,j)=>{ if(i!==j)p.pauseVideo(); });
          }
        }
      }
    });
    players.push(player);
  });
}

fetchVideos();
</script>

</body>
</html>
