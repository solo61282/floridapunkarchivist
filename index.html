<script>
  const playlistId = "UU63N1yWiGhzL2E9hcfFDJoQ"; // Florida Punk Archivist uploads
  const feedUrl = `https://www.youtube.com/feeds/videos.xml?playlist_id=${playlistId}`;
  const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feedUrl)}`;

  async function loadPlaylistVideos() {
    try {
      const response = await fetch(apiUrl);
      const data = await response.json();

      if (!data.items) {
        console.error("No videos found in feed:", data);
        return;
      }

      grid.innerHTML = ""; // remove existing videos

      data.items.forEach(item => {
        const videoId = item.link.split("v=")[1];
        
        const div = document.createElement("div");
        div.className = "video-item";

        div.innerHTML = `
          <iframe 
            title="${item.title}"
            src="https://www.youtube.com/embed/${videoId}"
            allowfullscreen>
          </iframe>
        `;

        grid.appendChild(div);
      });

      updateGrid(); // apply layout after loading
    } catch (error) {
      console.error("Error loading playlist:", error);
    }
  }

  loadPlaylistVideos();
</script>
